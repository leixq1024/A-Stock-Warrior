# A-Stock-Warrior (大A战士) - 需求文档

## 1. 项目概述

**项目名称**: A-Stock-Warrior (大A战士)  
**项目类型**: Node.js 命令行工具  
**核心功能**: 通过新浪财经/东方财富数据接口获取股票、ETF和基金数据，结合基本面与技术面进行策略分析，定期执行筛选符合条件的股票和ETF  
**目标用户**: 个人投资者

---

## 2. 功能需求

### 2.1 数据采集模块

#### 2.1.1 股票/ETF数据采集
- **实时行情**: 价格、涨跌幅、成交量、成交额、开盘价、最高价、最低价、昨收价
- **数据源**: 新浪财经API (`hq.sinajs.cn`)
- **支持**: A股股票、ETF

#### 2.1.2 基金数据采集
- **基本信息**: 基金代码、名称、类型
- **净值数据**: 单位净值、累计净值、日增长率
- **数据源**: 东方财富API (`fund.eastmoney.com`, `fundmobapi.eastmoney.com`)

### 2.2 策略分析模块

#### 2.2.1 基本面选股策略 (可配置)
- **PE估值筛选**: 市盈率范围 (peMin, peMax)
- **PB估值筛选**: 市净率上限 (pbMax)
- **ROE筛选**: 净资产收益率最低值 (roeMin)
- **市值筛选**: 总市值范围 (marketCapMin, marketCapMax)

#### 2.2.2 技术面选股策略 (可配置)
- **均线多头筛选**: MA5 > MA10 > MA20
- **动量筛选**: 近期涨跌幅过滤 (momentumMin)
- **成交量筛选**: 量比过滤 (volumeRatio)

### 2.3 基金筛选模块
- **类型筛选**: 股票型、混合型、指数型、债券型
- **规模筛选**: 最小规模 (scaleMin)
- **业绩筛选**: 年化收益率 (performanceMin)

### 2.4 数据导出模块
- 控制台结构化输出
- 展示代码、名称、价格、涨跌幅、成交量、PE、PB、市值、ROE等指标

---

## 3. 配置说明

配置文件: `src/config/index.js`

```javascript
{
  stock: {
    fundamental: {
      peMax: 50,      // 市盈率上限
      peMin: 0,       // 市盈率下限
      pbMax: 10,      // 市净率上限
      roeMin: 10,     // 最小ROE(%)
      marketCapMin: 0,      // 最小市值(元)
      marketCapMax: 1e14    // 最大市值(元)
    },
    technical: {
      maPeriods: [5, 10, 20],  // 均线周期
      momentumDays: 20,         // 动量筛选天数
      momentumMin: -10,         // 最小涨幅(%)
      volumeRatio: 0.5          // 成交量放大倍数
    }
  },
  fund: ['股票型', {
    type: '混合型', '指数型'],
    scaleMin: 0,
    performanceMin: -50
  }
}
```

---

## 4. 使用方法

```bash
# 分析股票/ETF
npm run stock 600519 000858 510300

# 筛选基金
npm run fund 股票型
npm run fund 混合型
npm run fund 指数型
```

---

## 5. 非功能需求

- **性能**: 单次查询响应时间 < 10秒
- **可用性**: 简洁的命令行交互
- **可维护性**: 模块化设计，易于扩展
- **稳定性**: 请求失败重试机制

---

## 6. 验收标准

- [x] 成功获取股票/ETF实时行情数据 (新浪财经)
- [x] 成功获取基金数据 (东方财富)
- [x] 基本面选股策略可配置执行
- [x] 技术面选股策略可配置执行
- [x] 基金筛选功能正常
- [x] 结果正确输出到控制台
